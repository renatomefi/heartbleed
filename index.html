<!DOCTYPE html>
<html lang="pt_BR" slick-uniqueid="3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <meta name="description" content="Vulnerabilidade Heartbleed, saiba mais!">
    <meta name="author" content="Renatomefi IT Intelligence http://www.renatomefi.com.br/">

    <meta property="og:site_name" content="Renatomefi IT Intelligence"/>
    <meta property="og:title" content="A Vulnerabilidade Heartbleed">
    <meta property="og:url" content="http://www.heartbleed.com.br/">
    <meta property="og:type" content="article">

    <title>Vulnerabilidade Heartbleed</title>

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:300,400,400italic" type="text/css">
    <link rel="stylesheet" href="/assets/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/heartbleed.css" type="text/css">
    <link rel="icon" type="image/png" href="/assets/favicon.png">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="http//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-48892402-3', 'heartbleed.com.br');
        ga('send', 'pageview');
    </script>
</head>

<body>

<div class="container">
<h1>A Vulnerabilidade Heartbleed</h1>

<h3 class="text-muted">Tradução livre do <a href="http://heartbleed.com" target="_blank">heartbleed.com</a></h3>

<div class="row">
    <div class="col-lg-8 col-md-8 col-sm-8">
        <p>A Vulnerabilidade Heartbleed é um bug severo na popular biblioteca de criptografia chamada OpenSSL. A falha
            permite roubo de informação protegida pelas criptografias nos protocolos SSL/TLS, esta que é de comum uso
            para segurança na internet. Os protocolos SSL/TLS fornecem comunicação segura e privacidade em conexões de
            internet, muito utilizados em aplicações web, email, mensageiros instantâneos (IM) e redes de comunicação
            privadas (VPNs).</p>

        <p>Este bug permite que qualquer pessoa na internet seja capaz de ler uma parte da memória ram dos sistemas
            protegidos pelo OpenSSL. Assim comprometendo as chaves de identificação que os serviços utilizam para
            criptografar o tráfego, este que pode conter usuários, senhas e o conteúdo enviado pelo usuário. Isso
            permite
            que invasores que estão monitorando sua comunicação, sejam capazes de roubar suas informações que estariam
            criptografadas inicialmente.</p>
    </div>
    <div class="col-lg-4 col-md-4 col-sm-4" style="padding-top: 30px;">
        <img src="./assets/heartbleed.png" alt="Heartbleed Bug">
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-6">
        <h3>Na prática, quais informações estão vulneráveis?</h3>

        <p>Nós testamos a falha em nossos serviços, nos comportando como invasores. Foi possível atacar sem deixar
            nenhum tipo de vestígio, mesmo fazendo um acesso por fora de nossos servidores. Fazendo um teste neutro sem
            utilizar informações privilegiadas ou credenciais de acesso, nós fomos capazes de obter as chaves de
            criptografia dos certificados X.509, assim como usuários e senhas, mensagens, emails e documentos da
            empresa.
        </p>
    </div>

    <div class="col-lg-6 col-md-6 col-sm-6">
        <h3>Como parar a vulnerabilidade?</h3>

        <p>Enquanto as versões que apresentam a falha estiverem em uso, as aplicações poderão ser atacadas. <a
                href="https://www.openssl.org/news/secadv_20140407.txt">Versão corrigida do OpenSSL</a> foi liberada e
            agora
            deve ser aplicada. Fabricantes de sistema operacional, distribuidores, vendedores de solução,
            desenvolvedores independentes devem adotar a correção e notificar seus usuários. Provedores de serviços e
            seus usuários devem instalar a correção nos seus sistemas operacionais, serviços de rede e aplicações assim
            que suas versões forem liberadas.</p>
    </div>
</div>
<div class="row">
<div class="col-lg-12 col-md-12 col-sm-12">
<hr>
<h3>Q&amp;A</h3>
<h4>O que é CVE-2014-0160?</h4>

<p>CVE-2014-0160 é a referência oficial da falha.
    CVE (Common Vulnerabilities and Exposures, Vulnerabilidades e Exposições públicas) é um padrão para

<p>CVE-2014-0160 is the official reference to this bug. CVE (Common Vulnerabilities and Exposures) is the
    Standard for Information Security Vulnerability Names maintained by <a href="http://cve.mitre.org/">MITRE</a>.
    Due to co-incident discovery a duplicate CVE, CVE-2014-0346, which was assigned to us, should not be
    used, since others independently went public with the CVE-2014-0160 identifier.</p>


<h4>Por quê esta falha é chamada de Heartbleed?</h4>

<p>Bug is in the OpenSSL's implementation of the TLS/DTLS (transport layer security protocols) heartbeat
    extension (RFC6520). When it is exploited it leads to the leak of memory contents from the server to the
    client and from the client to the server.</p>

<h4>O que torna a falha Heartbleed única?</h4>

<p>Bugs in single software or library come and go and are fixed by new versions. However this bug has left
    large amount of private keys and other secrets exposed to the Internet. Considering the long exposure,
    ease of exploitation and attacks leaving no trace this exposure should be taken seriously.</p>


<h4>Isso é uma falha na concepção da especificação do protocolo SSL/TLS?</h4>

<p>No. This is implementation problem, i.e. programming mistake in popular OpenSSL library that provides
    cryptographic services such as SSL/TLS to the applications and services.</p>

<h4>Que informações estão sendo vazadas?</h4>

<p>Encryption is used to protect secrets that may harm your privacy or security if they leak. In order to
    coordinate recovery from this bug we have classified the compromised secrets to four categories: 1)
    primary key material, 2) secondary key material and 3) protected content and 4) collateral.</p>

<h4>O que são as chaves primárias de criptografia vazadas e como recupera-las?</h4>

<p>These are the crown jewels, the encryption keys themselves. Leaked secret keys allows the attacker to
    decrypt any past and future traffic to the protected services and to impersonate the service at will.
    Any protection given by the encryption and the signatures in the X.509 certificates can be bypassed.
    Recovery from this leak requires patching the vulnerability, revocation of the compromised keys and
    reissuing and redistributing new keys. Even doing all this will still leave any traffic intercepted by
    the attacker in the past still vulnerable to decryption. All this has to be done by the owners of the
    services.</p>

<h4>O que são as chaves secundárias de criptografia vazadas e como recupera-las?</h4>

<p>These are for example the user credentials (user names and passwords) used in the vulnerable services.
    Recovery from this leaks requires owners of the service first to restore trust to the service according
    to steps described above. After this users can start changing their passwords and possible encryption
    keys according to the instructions from the owners of the services that have been compromised. All
    session keys and session cookies should be invalided and considered compromised.</p>

<h4>O que são os conteúdos protegidos vazados e como recupera-los?</h4>

<p>This is the actual content handled by the vulnerable services. It may be personal or financial details,
    private communication such as emails or instant messages, documents or anything seen worth protecting by
    encryption. Only owners of the services will be able to estimate the likelihood what has been leaked and
    they should notify their users accordingly. Most important thing is to restore trust to the primary and
    secondary key material as described above. Only this enables safe use of the compromised services in the
    future.</p>

<h4>Quais são os vazamentos colaterais e como recupera-los?</h4>

<p>Leaked collateral are other details that have been exposed to the attacker in the leaked memory content.
    These may contain technical details such as memory addresses and security measures such as canaries used
    to protect against overflow attacks. These have only contemporary value and will lose their value to the
    attacker when OpenSSL has been upgraded to a fixed version.</p>

<h4>A recuperação parece trabalhosa, existe uma maneira fácil?</h4>

<p>After seeing what we saw by "attacking" ourselves, with ease, we decided to take this very seriously. We
    have gone laboriously through patching our own critical services and are in progress of dealing with
    possible compromise of our primary and secondary key material. All this just in case we were not first
    ones to discover this and this could have been exploited in the wild already.</p>

<h4>Na prática, como a negação e a reemissão dos certificados funciona? </h4>

<p>If you are a service provider you have signed your certificates with a Certificate Authority (CA). You
    need to check your CA how compromised keys can be revoked and new certificate reissued for the new keys.
    Some CAs do this for free, some may take a fee.</p>

<h4>Eu estou afetado pela vulnerabilidade?</h4>

<p>You are likely to be affected either directly or indirectly. OpenSSL is the most popular open source
    cryptographic library and TLS (transport layer security) implementation used to encrypt traffic on the
    Internet. Your popular social site, your company's site, commerce site, hobby site, site you install
    software from or even sites run by your government might be using vulnerable OpenSSL. Many of online
    services use TLS to both to identify themselves to you and to protect your privacy and transactions. You
    might have networked appliances with logins secured by this buggy implementation of the TLS. Furthermore
    you might have client side software on your computer that could expose the data from your computer if
    you connect to compromised services.</p>

<h4>O quão a falha está difundida?</h4>

<p>Most notable software using OpenSSL are the open source web servers like Apache and nginx. The combined
    market share of just those two out of the active sites on the Internet was over 66% according to <a
            href="http://news.netcraft.com/archives/2014/04/02/april-2014-web-server-survey.html">Netcraft's
        April 2014 Web Server Survey</a>. Furthermore OpenSSL is used to protect for example email servers
    (SMTP, POP and IMAP protocols), chat servers (XMPP protocol), virtual private networks (SSL VPNs),
    network appliances and wide variety of client side software. Fortunately many large consumer sites are
    saved by their conservative choice of SSL/TLS termination equipment and software. Ironically smaller and
    more progressive services or those who have upgraded to latest and best encryption will be affected
    most. Furthermore OpenSSL is very popular in client software and somewhat popular in networked
    appliances which have most inertia in getting updates.</p>

<h4>Quais as versões afetadas do OpenSSL?</h4>

<p>Relação de diferentes versões:</p>

<ul>
    <li>OpenSSL 1.0.1 até 1.0.1f (inclusive) estão vulneráveis</li>
    <li>OpenSSL 1.0.1g NÃO está vulnerável</li>
    <li>OpenSSL ramificação 1.0.0 NÃO está vulnerável</li>
    <li>OpenSSL ramificação 0.9.8 NÃO está vulnerável</li>
</ul>

<p>Bug was introduced to OpenSSL in December 2011 and has been out in the wild since OpenSSL release 1.0.1
    on 14th of March 2012. OpenSSL 1.0.1g released on 7th of April 2014 fixes the bug.</p>

<h4>Quão difundidas são as versões vulneráveis do OpenSSL?</h4>

<p>The vulnerable versions have been out there for over two years now and they have been rapidly adopted by
    modern operating systems. A major contributing factor has been that TLS versions 1.1 and 1.2 came
    available with the first vulnerable OpenSSL version (1.0.1) and security community has been pushing the
    TLS 1.2 due to earlier attacks against TLS (such as the <a
            href="http://en.wikipedia.org/wiki/Transport_Layer_Security#BEAST_attack">BEAST</a>).</p>

<h4>E os Sistemas Operacionais?</h4>

<p>Algumas distribuições de sistemas operacionais que possuem a versão com a vulnerabilidade no OpenSSL:</p>

<ul>
    <li>Debian Wheezy (stable), OpenSSL 1.0.1e-2+deb7u4</li>
    <li>Ubuntu 12.04.4 LTS, OpenSSL 1.0.1-4ubuntu5.11</li>
    <li>CentOS 6.5, OpenSSL 1.0.1e-15</li>
    <li>Fedora 18, OpenSSL 1.0.1e-4</li>
    <li>OpenBSD 5.3 (OpenSSL 1.0.1c 10 maio 2012) e 5.4 (OpenSSL 1.0.1c 10 maio 2012)</li>
    <li>FreeBSD 10.0 - OpenSSL 1.0.1e 11 fevereiro 2013</li>
    <li>NetBSD 5.0.2 (OpenSSL 1.0.1e)</li>
    <li>OpenSUSE 12.2 (OpenSSL 1.0.1c)</li>
</ul>

<p>Algumas distribuições de sistemas operacionais que NÃO possuem a versão com a vulnerabilidade no OpenSSL:</p>

<ul>
    <li>Debian Squeeze (Versão estável antiga), OpenSSL 0.9.8o-4squeeze14</li>
    <li>SUSE Linux Enterprise Server</li>
    <li>FreeBSD 8.4 - OpenSSL 0.9.8y 5 fevereiro de 2013</li>
    <li>FreeBSD 9.2 - OpenSSL 0.9.8y 5 fevereiro de 2013</li>
    <li>FreeBSD Ports - OpenSSL 1.0.1g (Em 7 de abril às 21:46:40 2014 UTC)</li>
</ul>

<h4>Como o OpenSSL pode ser corrigido?</h4>

<p>Even though the actual code fix may appear trivial, OpenSSL team is the expert in fixing it properly so
    latest fixed version 1.0.1g or newer should be used. If this is not possible software developers can
    recompile OpenSSL with the handshake removed from the code by compile time option
    <code>-DOPENSSL_NO_HEARTBEATS</code>.
</p>

<h4>A extensão heartbeat deve ser removida com o intuito de ajudar na deteção de serviços vulneráveis?</h4>

<p>Recovery from this bug could benefit if the new version of the OpenSSL would both fix the bug and disable
    heartbeat temporarily until some future version. It appears that majority if not almost all TLS
    implementations that respond to the heartbeat request today are vulnerable versions of OpenSSL. If only
    vulnerable versions of OpenSSL would continue to respond to the heartbeat for next few months then large
    scale coordinated response to reach owners of vulnerable services would become more feasible.</p>

<h4>É possível detectar se alguém aproveitou a falha e usou contra mim?</h4>

<p>O abuso desta falha não deixa qualquer tipo de vestígio ou informações incomuns nos logs.</p>

<h4>É possível que IDS/IPS possam detectar e bloquear o ataque?</h4>

<p>Although the content of the heartbeat request is encrypted it has its own record type in the protocol.
    This should allow intrusion detection and prevention systems (IDS/IPS) to be trained to detect use of
    the heartbeat request. Due to encryption differentiating between legitimate use and attack can not be
    based on the content of the request, but the attack may be detected by comparing the size of the request
    against the size of the reply. This seems to imply that IDS/IPS can be programmed to detect the attack
    but not to block it unless heartbeat requests are blocked altogether.</p>

<h4>Já houveram muitos ataques?</h4>

<p>We don't know. Security community should deploy TLS/DTLS honeypots that entrap attackers and to alert
    about exploitation attempts.</p>

<h4>O invasor pode acessar realmente só 64 kilobytes da memória?</h4>

<p>There is no total of 64 kilobytes limitation to the attack, that limit applies only to a single
    heartbeat. Attacker can either keep reconnecting or during an active TLS connection keep requesting
    arbitrary number of 64 kilobyte chunks of memory content until enough secrets are revealed.</p>

<h4>Is this a MITM bug like Apple's goto fail bug was?</h4>

<p>No this doesn't require a man in the middle attack (MITM). Attacker can directly contact the vulnerable
    service or attack any user connecting to a malicious service. However in addition to direct threat the
    theft of the key material allows man in the middle attackers to impersonate compromised services.</p>

<h4>Os clientes de autenticação TLS conseguem lidar com isso?</h4>

<p>No, heartbeat request can be sent and is replied to during the handshake phase of the protocol. This
    occurs prior to client certificate authentication.</p>

<h4>O modo FIPS do OpenSSL consegue lidar com isso?</h4>

<p>No, OpenSSL Federal Information Processing Standard (FIPS) mode has no effect on the vulnerable heartbeat
    functionality.</p>

<h4>Does Perfect Forward Secrecy (PFS) mitigate this?</h4>

<p>Use of Perfect Forward Secrecy (PFS), which is unfortunately rare but powerful, should protect past
    communications from retrospective decryption. Please see <a
            href="https://twitter.com/ivanristic/status/453280081897467905">https://twitter.com/ivanristic/status/453280081897467905</a>
    how leaked tickets may affect this.</p>

<h4>Can heartbeat extension be disabled during the TLS handshake?</h4>

<p>No, vulnerable heartbeat extension code is activated regardless of the results of the handshake phase
    negotiations. Only way to protect yourself is to upgrade to fixed version of OpenSSL or to recompile
    OpenSSL with the handshake removed from the code.</p>

<h4>Who found the Heartbleed Bug?</h4>

<p>This bug was independently discovered by a team of security engineers (Riku, Antti and Matti) at <a
        href="http://www.codenomicon.com/">Codenomicon</a> and Neel Mehta of Google Security, who first
    reported it to the OpenSSL team. Codenomicon team found heartbleed bug while improving the SafeGuard
    feature in Codenomicon's Defensics security testing tools and reported this bug to the NCSC-FI for
    vulnerability coordination and reporting to OpenSSL team.</p>

<h4>O que é Defensics SafeGuard?</h4>

<p>A SafeGuard, recurso da Codenomicon Defensics, ferramenta de segurança que automaticamente testa o sistema alvo
    procurando fraquezas que comprometam a integridade, proteção ou privacidade.A SafeGuard é uma solução sistemática
    que expoem falhas em certificados criptográficos, vazamentos de privacidade ou fraquezas na autenticação
    que tenham exposto os usuários da internet ao ataque <i>man in the middle</i> e ao hacking <i>eavesdropping</i>.
    Além da falha HeartBleed o novo recurso da Defensics TLS Safeguard pode detectar por exemplo
    a falha de segurança no amplamente utilizado GnuTLS, aplicação de código aberto que implementa a funcionalidade
    SSL/TLS
    no <a href="http://gotofail.com/">"goto fail;"</a> falha na implementação TLS/SSL da Apple que foi corrigido
    em Fevereiro 2014.</p>

<h4>Quem coordena a resposta a esta vulnerabilidade?</h4>

<p><a href="https://www.cert.fi/en/index.html">NCSC-FI</a> tomou a tarefa de informar os autores do OpenSSL, softwares,
    sistemas operacionais e fornecedores de soluções, que foram potencialmente afetados. Entretanto,
    esta vulnerabilidade foi encontrada e os detalhes foram lançados de forma independente por outros, antes que este
    trabalho
    estivesse completo. Fornecedores de serviços pela internet devem notificar seus usuário onde e quando uma ação deve
    ser tomada.</p>

<h4>Existe um lado bom de tudo isso?</h4>

<p>Para aqueles provedores de serviços que foram afetados esta é uma boa hora de melhorar a segurança
    das chaves secretas utilizadas. Muitos softwares receberam updates, estes que geralmente não são atualizados.
    Mesmo que isso seja muito doloroso a comunidade de segurança, nos temos certeza que a infra-estrutura
    de criminosos virtuais e seus segredos foram expostos também.</p>

<h4>Onde encontrar mais informação?</h4>

<p>Este Q&amp;A foi publicado como sequência ao aviso OpenSSL, desde de que sua vulnerabilidade tornou-se pública em 7
    de abril de 2014.
    O projeto OpenSSL fez uma declaração na <a
            href="https://www.openssl.org/news/secadv_20140407.txt">https://www.openssl.org/news/secadv_20140407.txt</a>.
    NCSC-FI publicou um aviso em <a href="https://www.cert.fi/en/reports/2014/vulnerability788210.html">https://www.cert.fi/en/reports/2014/vulnerability788210.html</a>.
    Fornecedores individuais de distribuições de sistemas operacionais, proprietários afetados de serviços de Internet,
    pacotes de software
    e fornecedores de aparelhos podem emitir seus próprios avisos.</p>

<h4>Referências</h4>
<ul>
    </li>
    <li>CVE-2014-0160</li>
    <li>NCSC-FI case# 788210</li>
    <li><a href="https://www.openssl.org/news/secadv_20140407.txt">http://www.openssl.org/news/secadv_20140407.txt</a>
        <small>(publicado 7 de abril de 2014, ~17:30 UTC)</small>
    </li>
    <li><a href="http://blog.cloudflare.com/staying-ahead-of-openssl-vulnerabilities">http://blog.cloudflare.com/staying-ahead-of-openssl-vulnerabilities</a>
        <small>(publicado 7 de abril de 2014, ~18:00 UTC)</small>
    </li>
    <li><a href="http://www.ubuntu.com/usn/usn-2165-1/">http://www.ubuntu.com/usn/usn-2165-1/</a></li>
    <li>
        <a href="http://www.freshports.org/security/openssl/">http://www.freshports.org/security/openssl/</a>
    </li>
    <li><a href="https://blog.torproject.org/blog/openssl-bug-cve-2014-0160">https://blog.torproject.org/blog/openssl-bug-cve-2014-0160</a>
    </li>

    <li>
        <a href="https://rhn.redhat.com/errata/RHSA-2014-0376.html">https://rhn.redhat.com/errata/RHSA-2014-0376.html</a>
    </li>
    <li><a href="http://lists.centos.org/pipermail/centos-announce/2014-April/020249.html">http://lists.centos.org/pipermail/centos-announce/2014-April/020249.html</a>
    </li>
    <li><a href="https://lists.fedoraproject.org/pipermail/announce/2014-April/003205.html">https://lists.fedoraproject.org/pipermail/announce/2014-April/003205.html</a>
    </li>
    <li><a href="http://www.kb.cert.org/vuls/id/720951">http://www.kb.cert.org/vuls/id/720951</a></li>
    <li><a href="https://www.cert.fi/en/reports/2014/vulnerability788210.html">https://www.cert.fi/en/reports/2014/vulnerability788210.html</a>
    </li>
    <li><a href="https://www.cert.at/warnings/all/20140408.html">https://www.cert.at/warnings/all/20140408.html</a>
    </li>
    <li><a href="http://www.circl.lu/pub/tr-21/">http://www.circl.lu/pub/tr-21/</a></li>
</ul>

<h4>Tradução</h4>
<ul>
    <li><a href="http://heartbleed.com" target="_blank">http://heartbleed.com</a>
        <small>(texto original, publicado 7 de abril de 2014, ~19:00 UTC)</small>
    </li>
    <li><a href="http://br.linkedin.com/in/renatomefidf/" target="_blank">Renato Mendes Figueiredo</a> | <a
            href="http://www.renatomefi.com.br/" target="_blank">Renatomefi IT Solutions</a></li>
    <li><a href="https://github.com/milk-df" target="_blank">Samuel Mendes</a></li>
    <li>Ajude-nos a traduzir ou acrescentar mais informações em <a href="https://github.com/renatomefidf/heartbleed"
                                                                   target="_blank">https://github.com/renatomefidf/heartbleed</a>
    </li>
</ul>
</div>
</div>
</div>

<footer class="container">
    <div class="row">
        <div class="col-md-offset-2 col-lg-4 col-md-4 col-sm-4">
            <a class="renatomefi" title="Renatomefi IT Intelligence" href="http://www.renatomefi.com.br/">Renatomefi
                IT Intelligence</a>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <a class="codenomicon" title="Codenomicon - Abril 2014" href="http://www.codenomicon.com/">Codenomicon
                - Abril 2014</a>
        </div>
    </div>
</footer>

</body>
</html>